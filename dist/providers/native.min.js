(function(){uploadr.ext.native=function(e){var n,t,r,a;return n=e.files,t=e.progress,r=e.opt,a=e.data,new Promise(function(e,o){var i,p,u,l,d,f,s;return i=r||{},p=i.merge,u=i.route,t({percent:0,val:0,len:f}),p?(l=new FormData,n.map(function(e){return l.append("file",e.file)}),null!=a&&l.append("data","object"==typeof a?JSON.stringify(a):a),ld$.xhr(u,(i={method:"POST",body:l},i.headers=r.headers,i),{type:"json"}).then(e).catch(o)):(d=[],f=n.length,(s=function(n){var o,i,p;return(o=n.splice(0,1)[0])?((i=new FormData).append("file",o.file),null!=a&&i.append("data","object"==typeof a?JSON.stringify(a):a),ld$.xhr(u,(p={method:"POST",body:i},p.headers=r.headers,p),{type:"json",progress:function(e){return t((e.item=o,e))}}).then(function(e){return d.push(e[0]),s(n)}).catch(function(e){return d.push({name:o.file.name,error:e})})):e(d)})(n))})}}).call(this);
